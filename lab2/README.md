# Лабораторная работа 2

**Название:** "Разработка драйверов блочных устройств"

**Цель работы:** Цель работы: получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux. 
 
## Описание функциональности драйвера

* Драйвер создает виртуальный жесткий диск в оперативной  памяти с размером 50 Мбайт. 

* Созданный диск разбит на три первичных раздела с размерами 10Мбайт, 25Мбайт и  15Мбайт.

## Инструкция по сборке

1. Скачать репозиторий https://github.com/BazarovaAnna/SystemIO

2. cd lab2

3. make

4. Добавим модуль в ядро: insmod var4.ko

## Инструкция пользователя

* Проверим, что диск правильно разбит на разделы

sudo fdisk /dev/mydisk -l

* Отформатируем разделы диска с помощью команды mkfs.vfat:
 
sudo mkfs.vfat /dev/mydisk1
sudo mkfs.vfat /dev/mydisk2
sudo mkfs.vfat /dev/mydisk3

* Выдаем полные права для раздела mydisk1

sudo chmod 777 /dev/mydisk1

* Командой dd заполняем нулями первый сектор первого раздела

sudo dd if=/dev/zero of=/dev/mydisk1 count=1

* Командой cat вставляем любую строку

sudo cat > /dev/mydisk1

testAAAAA

* Командой xxd посмотрим первоначальные данные, находящиеся в разделе mydisk1
sudo xxd /dev/mydisk1 | less

Проверяем, что строка, которую мы ввели ранее, присутствует

## Примеры использования

### Измерить скорость передачи данных при копировании файлов между разделами созданного виртуального диска:

У нас есть строка в одном разделе. Скопируем ее в другой:

sudo dd if=/dev/mydisk1 of=/dev/mydisk2 count=1

Скорость: 697 кбит/c

### Измерить скорость передачи данных при копировании файлов между разделами виртуального и реального жестких дисков:

Скопируем эту строку из раздела виртуального в реальный жесткий диск и измерим скорость передачи данных:

sudo dd if=/dev/mydisk2 of=/dev/sda1 count=1

Скорость: 382 кбит/с